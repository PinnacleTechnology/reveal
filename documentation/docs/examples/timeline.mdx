---
id: timelinetool
title: Timeline Tool
describe: Applying styles to nodes based on date with Play & Stop
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

Reveal allows for applying styles to nodes based on date property and can be viewed as a playable entity
where node styles are applied to different nodes which can be used to showcase progress of the model construction.


:::note
The test data used in the documentation site is for testing and to show the capabilities of the tool.
The examples shown is therefore might not be a ideal model construction progression.
:::

<DemoWrapper name="Cognite3DViewerDemo" />

## Timeline

Timeline tool provides ablility to apply styles to nodes using Date as a property. It requires Time Keyframes to be created.
Each timeframe consists of nodes which are the elements to be rendered, appearance/styles to be assigned to the nodes and
lastly the date for the nodes as reference to be rendered.

### Creating keyframes
To create TimelineFrames, use createKeyFrame(date: Date, nodeCollection: NodeCollectionBase, nodeAppearance: NodeAppearance)
- date - Date reference for the TimelineFrame. Should provide the date value by Date.now() or number of milliseconds elapsed since January 1, 1970.
- nodeCollection - Set of nodes to be rendered for the TimelineKeyframe.
- nodeAppearance - Styling of the nodes.

### Play timelines
We use play(startDate: Date, endDate: Date, durationInMilliSeconds: number)
- startDate - TimelineFrame date to start the Playback of TimelineFrames.
- endDate - TimelineFrame date to stop the Playback of TimelineFrames.
- durationInMilliSeconds - Number of milli-seconds after which next TimelineFrame is rendered.

```js runnable
// import { NodeCollectionBase, DefaultNodeAppearance, PropertyFilterNodeCollection } from '@cognite/reveal';
// import { TimelineTool } from '@cognite/reveal/tools';

model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);

const timeline = new TimelineTool(model);

const nodes = new AssetNodeCollection(sdk, model);
timeline.createKeyFrame(new Date('2021-10-05'), nodes, { renderGhosted: false, outlineColor: NodeOutlineColor.Cyan });

nodes.executeFilter({ assetId: 4222791488928479 });
timeline.createKeyFrame(new Date('2021-10-06'), nodes, { renderGhosted: false, outlineColor: NodeOutlineColor.Orange });

const allPipes = new PropertyFilterNodeCollection(sdk, model);
allPipes.executeFilter({'PDMS': {'Type': 'PIPE'}});
timeline.createKeyFrame(new Date('2021-10-07'), allPipes, { renderGhosted: false, color: [40, 200, 20] });

const stuMechNodes = new PropertyFilterNodeCollection(sdk, model);
stuMechNodes.executeFilter({'PDMS': {':capDisc': 'MECH', 'Purpose': 'STU' }});
timeline.createKeyFrame(new Date('2021-10-08'), stuMechNodes, { renderGhosted: false, color: [80, 100, 120] });

timeline.play(new Date('2021-10-05'), new Date('2021-10-09'), 5000);

```

### Removing keyframes
To remove any TimelineFrame, use removeKeyFrame(date: Date)
- date - TimelineFrame date to be removed from the Timeline in milliseconds.

```js runnable
timeline.removeKeyFrame(new Date('2021-10-07'));
```

### Stop timeline playback

```js runnable
timeline.stopPlayback();
```

### Dates in keyframes
We can get all the dates added into the TimelineFrame by calling getAllDateInTimelineFrames()

```js runnable
const allDates = timeline.getAllDateInTimelineFrames();
```

### Assign Styles to set of Nodes to a TimelineKeyFrame or number of TimelineKeyFrames
Tool provides feature to add additional styles to a TimelineKeyframe or number of TimelineKeyframes or to all of the TimelineKeyframes in the Timeline Tool.
setNodeCollectionAndAppearance(dates: Date | Date[], nodeCollection: NodeCollectionBase, nodeAppearance: NodeAppearance)
- dates - Date of a TimelineKeyFrame or list of Dates from any existing TimelineKeyframes.
- nodeCollection - Set of nodes to be rendered for the TimelineKeyframe.
- nodeAppearance - Styling of the nodes.

```js runnable
const allDates = timeline.getAllDateInTimelineFrames();

timeline.setNodeCollectionAndAppearance(allDates, stuMechNodes, { renderGhosted: false, color: [80, 100, 120] });
```
